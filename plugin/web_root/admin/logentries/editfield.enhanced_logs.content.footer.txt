<script type="text/template" id="teacherOptionsTemplate">
    <h2>Teacher Portal</h2>
    <table id="teacherFieldOptions" border="0" cellpadding="0" cellspacing="0" class="linkDescList">
        <thead>
        <tr>
            <th>Option</th>
            <th>Value</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td class="bold">Show on Teacher Portal</td>
            <td>
                <input id="teacherShowOnPortal" type="checkbox" value="">
                <input id="backedUp" type="hidden" value="0">
            </td>
        </tr>
        <tr>
            <td class="bold">Match Admin Portal Formatting</td>
            <td>
                <input id="teacherMatchAdmin" type="checkbox" value="">
            </td>
        </tr>
        <tr>
            <td class="bold">Field Label</td>
            <td>
                <input id="teacherFieldLabel" type="text" value="" size="40">
                <input id="backupFieldLabel" type="hidden">
            </td>
        </tr>
        <tr>
            <td class="bold">Input Type</td>
            <td>
                <select id="teacherInputType" class="psTextWidget" maxlength="40">
                    <option value="text">Entry field</option>
                    <option value="static">Static field</option>
                    <option value="checkbox">Checkbox</option>
                    <option value="popup">Popup menu</option>
                    <option value="radio">Radio button</option>
                    <option value="textarea">Entry box</option>
                </select>
                <input id="backupInputType" type="hidden">
            </td>
        </tr>
        <tr>
            <td class="bold">Width<br>(applies only to 'entry field' and 'entry box' types)</td>
            <td>
                <input id="teacherInputWidth" type="text" value="" size="2"
                       data-validation="{&quot;minValue&quot;:&quot;-9223372036854775808&quot;,&quot;maxValue&quot;:&quot;9223372036854775807&quot;,&quot;isinteger&quot;:&quot;true&quot;,&quot;type&quot;:&quot;number&quot;,&quot;key&quot;:&quot;gen.valueli&quot;}"
                       class="psNumWidget" data-minvalue="-9223372036854775808"
                       data-maxvalue="9223372036854775807" data-isinteger="true">
                &nbsp;(width in characters)
                <input id="backupInputWidth" type="hidden">
            </td>
        </tr>
        <tr>
            <td class="bold">Height<br>(applies only to 'entry box' type)</td>
            <td>
                <input id="teacherInputHeight" type="text" value="" size="2"
                       data-validation="{&quot;minValue&quot;:&quot;-9223372036854775808&quot;,&quot;maxValue&quot;:&quot;9223372036854775807&quot;,&quot;isinteger&quot;:&quot;true&quot;,&quot;type&quot;:&quot;number&quot;,&quot;key&quot;:&quot;gen.valueli2&quot;}"
                       class="psNumWidget" data-minvalue="-9223372036854775808"
                       data-maxvalue="9223372036854775807" data-isinteger="true">
                &nbsp;(height in lines)
                <input id="backupInputHeight" type="hidden">
            </td>
        </tr>
        <tr>
            <td class="bold">Data for Popup or Radio buttons<br>(press return after each entry)</td>
            <td>
                <textarea id="teacherListEntries" rows="11" cols="40"></textarea>
                <input id="backupListEntries" type="hidden">
            </td>
        </tr>
        </tbody>
    </table>
</script>

<script>
    function backupAndClearFieldVals()
    {
        if ($j('#backedUp').val() === '0')
        {
            $j('#backupFieldLabel').val($j('#teacherFieldLabel').val());
            $j('#backupInputType').val($j('#teacherInputType').val());
            $j('#backupInputWidth').val($j('#teacherInputWidth').val());
            $j('#backupInputHeight').val($j('#teacherInputHeight').val());
            $j('#backupListEntries').val($j('#teacherListEntries').val());

            $j('#backedUp').val('1');
        }

        $j('#teacherFieldLabel').val('');
        $j('#teacherInputType').val('text');
        $j('#teacherInputWidth').val('');
        $j('#teacherInputHeight').val('');
        $j('#teacherListEntries').val('');
    }

    function restoreFieldVals()
    {
        $j('#teacherFieldLabel').val($j('#backupFieldLabel').val());
        $j('#teacherInputType').val($j('#backupInputType').val());
        $j('#teacherInputWidth').val($j('#backupInputWidth').val());
        $j('#teacherInputHeight').val($j('#backupInputHeight').val());
        $j('#teacherListEntries').val($j('#backupListEntries').val());

    }

    function fieldChange()
    {
        $j('#backedUp').val('0');
    }

    function showOnPortalChange()
    {
        if ($j('#teacherShowOnPortal').is(':checked'))
        {
            if ($j('#teacherMatchAdmin').is(':checked'))
            {
                $j('#teacherMatchAdmin').removeAttr('disabled');
            }
            else
            {
                $j('#teacherFieldOptions').find('input, select, textarea').removeAttr('disabled');

                restoreFieldVals();
            }
        }
        else
        {
            $j('#teacherFieldOptions').find('input, select, textarea')
                                      .not('#teacherShowOnPortal, :hidden')
                                      .attr('disabled', 'disabled');

            backupAndClearFieldVals();
        }
    }

    function matchAdminChange()
    {
        if ($j('#teacherMatchAdmin').is(':checked'))
        {
            $j('#teacherFieldOptions').find('input, select, textarea')
                                      .not('#teacherShowOnPortal, #teacherMatchAdmin, :hidden')
                                      .attr('disabled', 'disabled');

            backupAndClearFieldVals();
        }
        else
        {
            $j('#teacherFieldOptions').find('input, select, textarea')
                                      .not('#teacherShowOnPortal, #teacherMatchAdmin, :hidden')
                                      .removeAttr('disabled');

            restoreFieldVals();
        }
    }

    (function ()
    {
        let content = $j('#teacherOptionsTemplate').html();
        let target = $j('.box-round table');

        target.before('<h2>Admin Portal</h2>');
        target.after(content);

        $j('#teacherShowOnPortal').on('change', showOnPortalChange);
        $j('#teacherMatchAdmin').on('change', matchAdminChange);
        $j('#teacherFieldOptions').find('input, select, textarea')
                                  .not('#teacherShowOnPortal, #teacherMatchAdmin, :hidden')
                                  .on('change', fieldChange);
    })();
</script>